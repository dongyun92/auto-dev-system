name: database-setup
description: "Todo 애플리케이션을 위한 기본 데이터베이스 스키마 및 설정"
type: database
priority: high
estimated_hours: 2

dependencies:
  depends_on: []
  
tech_stack:
  - postgresql
  - flyway
  - docker

requirements:
  functional:
    - "PostgreSQL 데이터베이스 설정"
    - "사용자 테이블 생성 (id, username, email, password_hash, created_at)"
    - "할일 테이블 생성 (id, user_id, title, description, completed, created_at, updated_at)"
    - "외래키 관계 설정 (todos.user_id -> users.id)"
    - "기본 인덱스 설정 (user_id, created_at 등)"
  
  non_functional:
    - "Docker Compose로 로컬 개발 환경 구성"
    - "Flyway 마이그레이션 스크립트"
    - "데이터베이스 초기화 스크립트"

implementation:
  files_to_create:
    - "docker-compose.yml - PostgreSQL 컨테이너 설정"
    - "src/main/resources/db/migration/V1__Create_users_table.sql"
    - "src/main/resources/db/migration/V2__Create_todos_table.sql"
    - "src/main/resources/application.yml - 데이터베이스 연결 설정"
    - "README.md - 데이터베이스 설정 가이드"

testing:
  unit_tests:
    - "마이그레이션 스크립트 검증"
    - "테이블 구조 검증"
  
  integration_tests:
    - "Docker Compose 환경 테스트"
    - "데이터베이스 연결 테스트"

completion_criteria:
  - "PostgreSQL 컨테이너가 정상적으로 실행됨"
  - "모든 마이그레이션이 성공적으로 적용됨"
  - "테이블과 인덱스가 올바르게 생성됨"
  - "외래키 제약조건이 적용됨"
  - "기본 데이터 삽입 가능"